<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Note Pro</title>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pouchdb/6.2.0/pouchdb.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.10/handlebars.min.js"></script>
  <script
      src="https://raw.github.com/badsyntax/handlebars-form-helpers/master/dist/handlebars.form-helpers.min.js"></script>

  <!--
  $.get('templates/products.hbs', function (data) {
      var template=Handlebars.compile(data);
      $(target).html(template(jsonData));
  }, 'html')
  -->

  <link href="reset.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">

  <script src="loadTemplate.js"></script>
</head>
<body class="white-and-black" style="display: block;">

<header class="flex-container" style="flex-direction: column; ">
  <section class="flex-container" style="justify-content: space-between;">
    <button style="">Create new Note</button>
    <select id="style-selector" name="style" style=""
            onchange="let body = $('body'); body.removeClass(); body.addClass($('#style-selector')[0].value)">
      <option value="black-and-white">Black & White Style</option>
      <option value="white-and-black" selected>White & Black Style</option>
    </select>
  </section>

  <section class="flex-container" style="justify-content: space-between;">
    <form class="button-group">
      <input id="sort-by-importance" type="radio" name="sort-by" checked>
      <label for="sort-by-importance" class="button">
        <i class="fa fa-circle-o icon-unchecked"></i>
        <i class="fa fa-check-circle-o icon-checked"></i>
        By importance
      </label>
      <input id="sort-by-finish-date" type="radio" name="sort-by">
      <label for="sort-by-finish-date" class="button">
        <i class="fa fa-circle-o icon-unchecked"></i>
        <i class="fa fa-check-circle-o icon-checked"></i>
        By finish date
      </label>
      <input id="sort-by-create-date" type="radio" name="sort-by">
      <label for="sort-by-create-date" class="button">
        <i class="fa fa-circle-o icon-unchecked"></i>
        <i class="fa fa-check-circle-o icon-checked"></i>
        By created date
      </label>
    </form>

    <input id="show-finished" type="checkbox" name="show-finished" class="button">
    <label for="show-finished" class="button">
      <i class="fa fa-square-o icon-unchecked"></i>
      <i class="fa fa-check-square-o icon-checked"></i>
      Show finished
    </label>
  </section>
</header>

<main style="flex: 1; overflow: auto" id="main-container">

</main>

<main style="flex: 1; overflow: auto">
  <div class="form-group">
    <label>Titel</label>
    <input value="Mein schöner titel" class="input-control"/>
  </div>

  <div class="form-group">
    <label>Beschreibung</label>
    <textarea class="input-control" rows="10">HTML für die note App erstellen.
CSS erstellen für die note App.</textarea>
  </div>

  <div class="form-group">
    <label>Wichtigkeit</label>
    <!-- Mit Radio Buttons und :selected lösen -->
    <div style="min-width: 5em; flex-grow: 0;">
      <i class="fa fa-bolt"></i>
      <i class="fa fa-bolt"></i>
      <i class="fa fa-bolt" style="color: var(--button-bg-color)"></i>
      <i class="fa fa-bolt" style="color: var(--button-bg-color)"></i>
      <i class="fa fa-bolt" style="color: var(--button-bg-color)"></i>
    </div>
  </div>

  <div class="form-group">
    <label>&nbsp;</label>
    <button>Save</button>
    <button>Cancel</button>
  </div>
</main>

<button onclick="initDb()">Fill DB</button>

<script>
    'use strict';
    const mainContainerID = "main-container";
    const db = new PouchDB('notes');
    showNotesOverview();

    function showNotesOverview() {
        db.allDocs({include_docs: true, descending: true}, function (err, doc) {
            new LoadTemplate(mainContainerID, "notes-overview", {notes: _.map(doc.rows, "doc")}).create(() => {
            });
        });
    }

    function showNote() {

    }

    function initDb() {
        let note1 = {
            title: "Dies mein Titel",
            description: "Mein schöne Beschreibung",
            creationDate: new Date()
        };
        let note2 = {
            title: "CAS FEE Selbststudium / Projekt Aufgabe erledigen / Übermässig langer Titel hat hier auch noch irgendwie Platz",
            description: "HTML für die note App erstellen.\nCSS erstellen für die note App.",
            creationDate: new Date()
        };

        db.post(note1, handler);
        db.post(note2, handler);

        showNotesOverview();
    }

    function handler(err, result) {
        if (err) {
            console.log(err);
        }
    }

</script>
<script type="module" src="js/app.js"></script>


</body>
</html>